(()=>{"use strict";let e=(function(e){return e},function(e){return 1-(1-e)});const t=(t,n,o,r,s="flex")=>{const a=document.querySelector(o),l=document.querySelector(r);(({timing:e,draw:t,duration:n})=>{let o=performance.now();requestAnimationFrame((function r(s){let a=(s-o)/n;a>1&&(a=1);let l=e(a);t(l),a<1&&requestAnimationFrame(r)}))})({duration:t,timing:e,draw:function(e){let t=Math.abs(n-e);a.style.opacity=t,l.style.opacity=t,a.style.display=s,l.style.display=s,0==+a.style.opacity&&(a.style.display="none",l.style.display="none")}})},n=(e,n,o,r=".overlay",s)=>{const a=document.querySelector(e).querySelectorAll(n);document.querySelector(o),a.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),t(300,0,r,o)}))})),window.addEventListener("click",(e=>{e.target.classList.contains(s)&&(e.preventDefault(),t(300,1,r,o))}))},o=e=>{let t=!0,n=/\d[\d\(\)\ -]{9,11}\d$/,o=/^[а-яА-Я\ /]{2,16}$/;return e.forEach((e=>{e.classList.remove("error"),e.classList.remove("success"),"phone"===e.name&&!0!==n.test(e.value)||"fio"===e.name&&!0!==o.test(e.value)?e.classList.add("error"):e.classList.add("success"),e.classList.contains("success")||(t=!1)})),t},r=({formId:e,someElem:n=[]})=>{const r=document.querySelectorAll(e),s=document.createElement("div");try{if(0===r.length)throw new Error("Форма не найдена");r.forEach((e=>{e.addEventListener("submit",(n=>{n.preventDefault(),(e=>{const n=e.querySelectorAll("input"),r=new FormData(e),a={};var l;r.forEach(((e,t)=>{a[t]=e})),o(n)&&(s.textContent="",e.append(s),(l=a,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(l),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((e=>e.json()))).then((o=>{s.textContent="Спасибо! Мы с вами свяжемся",setTimeout((()=>e.removeChild(s)),1500),setTimeout((()=>t(300,1,".overlay",".header-modal")),1500),n.forEach((e=>{e.value="",e.classList.remove("error"),e.classList.remove("success")}))})).catch((e=>s.textContent="Ошибка...")))})(e)}))}))}catch(e){console.log(e.message)}};n("#header",".btn-block",".header-modal",".overlay","header-modal__close"),n("#services",".btn",".services-modal",".overlay","services-modal__close"),((e,t,n,o,r,s)=>{const a=document.querySelectorAll(e),l=e=>e<=9?"0"+e:e;a.forEach((e=>{const a=e.querySelector(n),c=e.querySelector(o),i=e.querySelector(r),u=e.querySelector(s);console.log(u);const d=()=>{const e=document.querySelector(".timer-action");let n=(()=>{let e=(new Date(t).getTime()-(new Date).getTime())/1e3;return{timerRemaining:e,days:Math.floor(e/60/60/24),hours:Math.floor(e/60/60%24),minutes:Math.floor(e/60%60),seconds:Math.floor(e%60)}})();a.textContent=l(n.days),c.textContent=l(n.hours),i.textContent=l(n.minutes),u.textContent=l(n.seconds),n.timerRemaining<=0&&(a.textContent="00",c.textContent="00",i.textContent="00",u.textContent="00",e.textContent="Акция закончилась",clearInterval(m))};d();let m=setInterval(d,1e3)}))})(".countdown-text","26 marth 2022",".days",".hours",".minutes",".seconds"),((e,t,n,r,s="invalid",a="valid")=>{const l=/[^0-9]/,c=/([^а-яА-Я. ])+/gi,i=(e,t)=>{document.querySelectorAll(`form input[name=${t}]`).forEach((t=>{t.addEventListener("input",(()=>{t.value=t.value.replace(e,""),(t.classList.contains(s)||t.classList.contains(a))&&o([t])})),t.addEventListener("invalid",(e=>{e.preventDefault(),o([e.target])}))}))},u=()=>{!function(e,t="+7 (__) --"){const n=document.querySelectorAll(e);function o(e){const n=e.keyCode,o=t,r=o.replace(/\D/g,""),s=this.value.replace(/\D/g,"");let a=0,l=o.replace(/[_\d]/g,(function(e){return a<s.length?s.charAt(a++)||r.charAt(a):e}));a=l.indexOf("_"),-1!=a&&(l=l.slice(0,a));let c=o.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");c=new RegExp("^"+c+"$"),(!c.test(this.value)||this.value.length<5||n>47&&n<58)&&(this.value=l),"blur"==e.type&&this.value.length<5&&(this.value="")}for(const e of n)e.addEventListener("input",o),e.addEventListener("focus",o),e.addEventListener("blur",o)}(`form input[name=${r}]`,"+7__________")};try{i(c,t),i(l,r),u()}catch(e){console.log(e.message)}})(0,"fio",0,"phone","error","success"),r({formId:".form-horizontal"}),r({formId:".header-modal form"})})();