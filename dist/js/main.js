(()=>{"use strict";let e=(function(e){return e},function(e){return 1-(1-e)});const t=(t,n,o,s,r="flex")=>{const a=document.querySelector(o),l=document.querySelector(s);(({timing:e,draw:t,duration:n})=>{let o=performance.now();requestAnimationFrame((function s(r){let a=(r-o)/n;a>1&&(a=1);let l=e(a);t(l),a<1&&requestAnimationFrame(s)}))})({duration:t,timing:e,draw:function(e){let t=Math.abs(n-e);a.style.opacity=t,l.style.opacity=t,a.style.display=r,l.style.display=r,0==+a.style.opacity&&(a.style.display="none",l.style.display="none")}})},n=(e,n,o,s=".overlay",r)=>{const a=document.querySelector(e).querySelectorAll(n);document.querySelector(o),a.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),t(300,0,s,o)}))})),window.addEventListener("click",(e=>{e.target.classList.contains(r)&&(e.preventDefault(),t(300,1,s,o))}))},o=e=>{let t=!0,n=/\d[\d\(\)\ -]{9,11}\d$/,o=/^[а-яА-Я\ /]{2,16}$/;return e.forEach((e=>{e.classList.remove("error"),e.classList.remove("success"),"phone"===e.name&&!0!==n.test(e.value)||"fio"===e.name&&!0!==o.test(e.value)?e.classList.add("error"):e.classList.add("success"),e.classList.contains("success")||(t=!1)})),t},s=({formId:e,someElem:n=[]})=>{const s=document.querySelector(e),r=document.createElement("div");try{if(!s)throw new Error("Форма не найдена");s.addEventListener("submit",(e=>{e.preventDefault(),(()=>{const e=s.querySelectorAll("input"),n=new FormData(s),a={};var l;n.forEach(((e,t)=>{a[t]=e})),o(e)&&(r.textContent="",s.append(r),(l=a,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(l),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((e=>e.json()))).then((n=>{r.textContent="Спасибо! Мы с вами свяжемся",setTimeout((()=>s.removeChild(r)),1500),setTimeout((()=>t(300,1,".overlay",".header-modal")),1500),e.forEach((e=>{e.value="",e.classList.remove("error"),e.classList.remove("success")}))})).catch((e=>r.textContent="Ошибка...")))})()}))}catch(e){console.log(e.message)}};n("#header",".btn-block",".header-modal",".overlay","header-modal__close"),n("#services",".btn",".services-modal",".overlay","services-modal__close"),((e,t,n,o,s)=>{const r=document.getElementById(t),a=document.getElementById(n),l=document.getElementById(o),c=document.getElementById(s),i=e=>e<=9?"0"+e:e;console.log(c);const d=()=>{const t=document.querySelector(".timer-action");let n=(()=>{let t=(new Date(e).getTime()-(new Date).getTime())/1e3;return{timerRemaining:t,days:Math.floor(t/60/60/24),hours:Math.floor(t/60/60%24),minutes:Math.floor(t/60%60),seconds:Math.floor(t%60)}})();r.textContent=i(n.days),a.textContent=i(n.hours),l.textContent=i(n.minutes),c.textContent=i(n.seconds),n.timerRemaining<=0&&(r.textContent="00",a.textContent="00",l.textContent="00",c.textContent="00",t.textContent="Акция закончилась",clearInterval(u))};d();let u=setInterval(d,1e3)})("26 marth 2022","days","hours","minutes","seconds"),((e,t,n,s,r="invalid",a="valid")=>{const l=/[^0-9]/,c=/([^а-яА-Я. ])+/gi,i=(e,t)=>{document.querySelectorAll(`form input[name=${t}]`).forEach((t=>{t.addEventListener("input",(()=>{t.value=t.value.replace(e,""),(t.classList.contains(r)||t.classList.contains(a))&&o([t])})),t.addEventListener("invalid",(e=>{e.preventDefault(),o([e.target])}))}))},d=()=>{!function(e,t="+7 (__) --"){const n=document.querySelectorAll(e);function o(e){const n=e.keyCode,o=t,s=o.replace(/\D/g,""),r=this.value.replace(/\D/g,"");let a=0,l=o.replace(/[_\d]/g,(function(e){return a<r.length?r.charAt(a++)||s.charAt(a):e}));a=l.indexOf("_"),-1!=a&&(l=l.slice(0,a));let c=o.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");c=new RegExp("^"+c+"$"),(!c.test(this.value)||this.value.length<5||n>47&&n<58)&&(this.value=l),"blur"==e.type&&this.value.length<5&&(this.value="")}for(const e of n)e.addEventListener("input",o),e.addEventListener("focus",o),e.addEventListener("blur",o)}(`form input[name=${s}]`,"+7__________")};try{i(c,t),i(l,s),d()}catch(e){console.log(e.message)}})(0,"fio",0,"phone","error","success"),s({formId:".form-horizontal"}),s({formId:".header-modal form"})})();